(this.webpackJsonpapp_user=this.webpackJsonpapp_user||[]).push([[0],{16:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return d}));var r=n(11),a=n(2),c=n.n(a),s=n(7),o="https://react-9e703-default-rtdb.firebaseio.com/",u=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyAZjoy8dPiBktGsrJ_4z45RCFrc-TxGnko"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Login Failed");case 5:return e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",{success:r.registered||!1,userId:r.localId});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(o,"/items/").concat(t.userId,".json"),{method:"PUT",body:JSON.stringify(t.items),headers:{"Content-Type":"application/json"}});case 2:if(e.sent.ok){e.next=5;break}throw new Error("Send data Failed");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a,s,u,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(o,"/items/").concat(t.userId,".json"));case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,n.ok){e.next=8;break}throw new Error(a.message||"Could not get items.");case 8:for(u in s=[],a)i=Object(r.a)({id:u},a[u]),s.push(i);return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},17:function(e,t,n){"use strict";var r=n(11),a=n(2),c=n.n(a),s=n(7),o=n(5),u=n(0),i=function(e,t){return"sending"===t.type?{status:"pending",data:e.data,error:e.error}:"success"===t.type?{status:"completed",data:t.data,error:e.error}:"error"===t.type?{status:"completed",data:e.data,error:t.value}:void 0};t.a=function(e,t){var n=Object(u.useReducer)(i,{status:t?"pending":null,data:null,error:null}),a=Object(o.a)(n,2),d=a[0],l=a[1],f=Object(u.useCallback)(function(){var t=Object(s.a)(c.a.mark((function t(n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l({type:"sending"}),t.prev=1,t.next=4,e(n);case 4:r=t.sent,l({type:"success",data:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),l({type:"error",value:t.t0.message||"something went wrong"});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(r.a)({sendRequest:f},d)}},23:function(e,t,n){},27:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(9),c=n.n(a),s=(n(23),n(5)),o=n(6),u=(n(27),n(16)),i=n(17),d=n(1),l=Object(r.lazy)((function(){return n.e(7).then(n.bind(null,37))})),f=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,53))})),p=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,55))})),b=Object(r.lazy)((function(){return Promise.all([n.e(6),n.e(3)]).then(n.bind(null,56))})),j=!0;var h=function(){var e=Object(o.c)((function(e){return e.items})),t=Object(o.c)((function(e){return e.userId})),n=Object(o.c)((function(e){return e.changed})),a=Object(i.a)(u.c).sendRequest,c="1"===localStorage.getItem("isLoggedIn"),h=Object(r.useState)(c),g=Object(s.a)(h,2),O=g[0],m=g[1],y=Object(r.useState)(!1),v=Object(s.a)(y,2),I=v[0],x=v[1],w=Object(r.useState)(!c),S=Object(s.a)(w,2),k=S[0],E=S[1];return Object(r.useEffect)((function(){j?j=!1:O&&n&&a({items:e,userId:t})}),[O,e,a,n,t]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(l,{ShowSignIn:!1,ShowSignUp:!1,onShowPost:function(){x(!I)},onLogout:function(){localStorage.setItem("isLoggedIn","0"),localStorage.clear(),window.location.reload()},isLoggedIn:O}),O&&I&&Object(d.jsx)(p,{}),O&&!I&&Object(d.jsx)(f,{}),k&&Object(d.jsx)(b,{onSignUp:function(){E(!k)},onSignIn:function(){m(!0),x(!1),E(!1)}})]})},g=n(15),O=n(32),m=localStorage.getItem("userId"),y={items:[],userId:m||"",changed:!1},v=Object(O.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;if("LOGGER"===t.type)return{items:e.items,userId:t.payload,changed:e.changed};if("UPDATE"===t.type)return{items:t.payload,userId:e.userId,changed:e.changed};if("ADD"===t.type){var n=e.items.findIndex((function(e){return e.id===t.payload.id})),r=e.items[n];if(r){var a=Object(g.a)(e.items);return a[n]=t.payload,{items:a,userId:e.userId,changed:!0}}return{items:[].concat(Object(g.a)(e.items),[t.payload]),userId:e.userId,changed:!0}}if("DEL"===t.type){var c=e.items.filter((function(e){return e.id!==t.payload}));return{items:c,userId:e.userId,changed:!0}}return y}));c.a.render(Object(d.jsxs)(o.a,{store:v,children:[" ",Object(d.jsx)(r.Suspense,{fallback:Object(d.jsx)("div",{children:"Loading.."}),children:Object(d.jsx)(h,{})})]}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.77d01e2c.chunk.js.map